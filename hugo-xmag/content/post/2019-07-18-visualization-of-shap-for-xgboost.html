<link href="2019-07-18-visualization-of-shap-for-xgboost_files/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="2019-07-18-visualization-of-shap-for-xgboost_files/pagedtable-1.1/js/pagedtable.js"></script>

<div id="TOC">
<ul>
<li><a href="#shap-values-local-explanation-to-global-understanding">SHAP values: local explanation to global understanding</a></li>
<li><a href="#shap-values-structure">SHAP values structure</a></li>
<li><a href="#shap-plots">SHAP plots</a><ul>
<li><a href="#stack-plot">Stack plot</a></li>
<li><a href="#summary-plot">Summary plot</a></li>
<li><a href="#dependence-plot">Dependence plot</a></li>
</ul></li>
</ul>
</div>

<p>Example of a SHAP summary plot:<br />
<img src="https://liuyanguu.github.io/post/2018-10-05-shap-visualization-for-xgboost_files/figure-html/unnamed-chunk-4-1.png" width="400px"></p>
<div id="shap-values-local-explanation-to-global-understanding" class="section level1">
<h1>SHAP values: local explanation to global understanding</h1>
<p>Tree-based machine learning models (random forest, gradient boosting, XGBoost) are the most popular non-linear models today. SHAP (SHapley Additive exPlnation) values is claimed to be the most advanced method to interpret results from tree-based models. It was based on Shaply values from game theory.</p>
<p>Main papers for reference:<br />
1. 2017 <a href="https://arxiv.org/abs/1705.07874">A Unified Approach to Interpreting Model Predictions</a><br />
2. 2019 <a href="https://arxiv.org/abs/1802.03888">Consistent Individualized Feature Attribution for Tree
Ensembles</a><br />
3. 2019 <a href="https://arxiv.org/abs/1905.04610">Explainable AI for Trees: From Local Explanations to Global Understanding</a><br />
The <a href="https://github.com/slundberg/shap">github page</a> that explains these visualization functions developed by <em>Scott Lundberg</em> in Python. Here we do them in R. In r package <em>xgboost</em> there is only one simple function <em>xgb.plot.shap</em> that can make the dependence plot.</p>
<p>There are the two main advantages according the paper 3:<br />
<strong>Local Explanation</strong></p>
<p><strong>Consistency</strong></p>
</div>
<div id="shap-values-structure" class="section level1">
<h1>SHAP values structure</h1>
<p>The SHAP values dataset has the same dimention (8441,9) as the dataset of the independent variables (8441,9) fit into the xgboost model.</p>
<p>The sum of each rowâ€™s SHAP values (plus the bias, which is like an intercept) is the predicted value from the model. As in the following table of SHAP values, <code>rowSum</code> equals the <code>predict(xgb_mod)</code>.</p>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["dayint"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Column_WV"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["AOT_Uncertainty"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["elev"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["aod"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["RelAZ"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["DevAll_P1km"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["dist_water_km"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["forestProp_1km"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["BIAS"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["rowSum"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["pred_mod"],"name":[12],"type":["dbl"],"align":["right"]}],"data":[{"1":"-0.0007136299","2":"-0.0362484083","3":"0.015275436","4":"-1.447229e-03","5":"-0.084426180","6":"0.0504944809","7":"-0.009329651","8":"0.0049207844","9":"0.016627252","10":"-0.05340123","11":"-0.098248","12":"-0.098249"},{"1":"0.0483252220","2":"0.0027729867","3":"0.047128100","4":"-2.258600e-03","5":"0.070214041","6":"0.0082143554","7":"-0.037676413","8":"0.0123552196","9":"-0.057861157","10":"-0.05340123","11":"0.037813","12":"0.037812"},{"1":"0.0244607348","2":"0.0064190431","3":"0.065719217","4":"3.533442e-03","5":"0.032038484","6":"0.0314820111","7":"-0.002272014","8":"0.0026834249","9":"0.021049825","10":"-0.05340123","11":"0.131713","12":"0.131713"},{"1":"0.0126062026","2":"-0.0261749420","3":"0.081319407","4":"-9.853129e-04","5":"0.030472463","6":"0.0105067994","7":"-0.019271612","8":"-0.0046435641","9":"-0.046694908","10":"-0.05340123","11":"-0.016267","12":"-0.016267"},{"1":"-0.0144856051","2":"-0.1017216370","3":"0.080200031","4":"-7.127956e-04","5":"-0.077334478","6":"-0.0121177584","7":"-0.039514571","8":"-0.0131448731","9":"-0.079659164","10":"-0.05340123","11":"-0.311892","12":"-0.311892"},{"1":"0.0289954189","2":"0.0290955268","3":"0.074444309","4":"1.150702e-02","5":"0.003886056","6":"0.0277804658","7":"0.067352869","8":"0.0421083197","9":"0.042303737","10":"-0.05340123","11":"0.274072","12":"0.274072"},{"1":"-0.0109700672","2":"-0.0151571017","3":"-0.082571141","4":"-7.117801e-03","5":"-0.136016726","6":"-0.0145125529","7":"-0.004765013","8":"0.0008295985","9":"0.013566683","10":"-0.05340123","11":"-0.310115","12":"-0.310115"},{"1":"0.0080581186","2":"-0.0182875544","3":"0.005294231","4":"-5.462323e-04","5":"-0.100769691","6":"0.0116946837","7":"-0.038349882","8":"-0.0052558854","9":"-0.057109226","10":"-0.05340123","11":"-0.248673","12":"-0.248673"},{"1":"0.0286981463","2":"-0.0146346195","3":"-0.019761110","4":"5.889682e-03","5":"-0.072464846","6":"0.0409035794","7":"-0.025784845","8":"-0.0055071241","9":"-0.065564573","10":"-0.05340123","11":"-0.181627","12":"-0.181628"},{"1":"0.0557696112","2":"0.0070224302","3":"-0.018486764","4":"1.095363e-02","5":"-0.023406604","6":"0.0231061094","7":"0.032921065","8":"0.0295242798","9":"0.025952727","10":"-0.05340123","11":"0.089955","12":"0.089954"},{"1":"0.1143170521","2":"-0.0461417101","3":"-0.043263748","4":"7.094176e-03","5":"-0.158102214","6":"-0.0665287450","7":"-0.020188792","8":"0.0073514278","9":"-0.053599834","10":"-0.05340123","11":"-0.312464","12":"-0.312464"},{"1":"0.0332557373","2":"0.0060055843","3":"0.043587029","4":"-1.651492e-04","5":"0.035833791","6":"0.0387744047","7":"-0.011754706","8":"0.0001532194","9":"-0.030072818","10":"-0.05340123","11":"0.062216","12":"0.062215"},{"1":"0.0386004709","2":"-0.0194915216","3":"0.078040920","4":"2.433702e-02","5":"-0.035902258","6":"0.1405932903","7":"-0.016083734","8":"-0.0006462373","9":"-0.045452643","10":"-0.05340123","11":"0.110594","12":"0.110593"},{"1":"0.0011791064","2":"-0.0306688882","3":"0.043403175","4":"-3.622324e-03","5":"0.045755364","6":"-0.0044105193","7":"-0.051104676","8":"0.0062055914","9":"-0.075060487","10":"-0.05340123","11":"-0.121725","12":"-0.121725"},{"1":"0.0132425996","2":"-0.0061191921","3":"0.026390793","4":"2.885847e-03","5":"0.057599414","6":"-0.0006632117","7":"-0.028181478","8":"0.0115472116","9":"-0.063950136","10":"-0.05340123","11":"-0.040649","12":"-0.040650"},{"1":"0.0029881911","2":"-0.0250548907","3":"0.047471188","4":"3.383578e-03","5":"0.003532130","6":"0.0171019752","7":"0.001874330","8":"0.0015018923","9":"0.016224245","10":"-0.05340123","11":"0.015621","12":"0.015621"},{"1":"-0.0057729837","2":"-0.0204977151","3":"0.051469874","4":"4.239231e-04","5":"0.019761831","6":"0.0034678206","7":"-0.013058271","8":"-0.0053999336","9":"-0.049781013","10":"-0.05340123","11":"-0.072788","12":"-0.072789"},{"1":"0.0027206053","2":"-0.0237058476","3":"0.032329518","4":"7.820959e-03","5":"0.015929129","6":"0.0208718311","7":"0.030954538","8":"0.0355574489","9":"0.031254906","10":"-0.05340123","11":"0.100332","12":"0.100331"},{"1":"0.0064142551","2":"-0.0503572859","3":"-0.079861403","4":"-1.208322e-02","5":"-0.099724405","6":"-0.0205318928","7":"-0.001722082","8":"0.0063142106","9":"0.023022693","10":"-0.05340123","11":"-0.281930","12":"-0.281931"},{"1":"0.0216212515","2":"-0.0140521144","3":"0.081682742","4":"3.256939e-03","5":"0.047129452","6":"0.0129935546","7":"-0.024815356","8":"0.0109031089","9":"-0.065502979","10":"-0.05340123","11":"0.019815","12":"0.019816"},{"1":"0.0596609525","2":"0.0239899550","3":"0.096238554","4":"1.027447e-02","5":"0.001842417","6":"0.0987594351","7":"0.004092095","8":"0.0072772843","9":"0.035979591","10":"-0.05340123","11":"0.284714","12":"0.284714"},{"1":"0.0259094033","2":"-0.0131409001","3":"0.062263429","4":"-1.778607e-03","5":"0.034903601","6":"0.0541032851","7":"-0.019892856","8":"-0.0042041666","9":"-0.054790251","10":"-0.05340123","11":"0.029972","12":"0.029971"},{"1":"0.0011654416","2":"-0.0330359153","3":"0.087566175","4":"3.403621e-03","5":"-0.068294190","6":"0.0862835497","7":"-0.030128824","8":"-0.0083072856","9":"-0.076190047","10":"-0.05340123","11":"-0.090939","12":"-0.090939"},{"1":"-0.0290809162","2":"-0.0757175237","3":"-0.089153923","4":"-8.143437e-03","5":"-0.201693133","6":"-0.0720902979","7":"-0.119129464","8":"-0.0025581429","9":"-0.128023475","10":"-0.05340123","11":"-0.778992","12":"-0.778992"},{"1":"-0.0091848494","2":"-0.0652090386","3":"-0.082371265","4":"-5.228519e-03","5":"-0.188423514","6":"-0.0730113685","7":"-0.061695017","8":"-0.0002954636","9":"-0.111183152","10":"-0.05340123","11":"-0.650003","12":"-0.650005"},{"1":"-0.0283410084","2":"-0.0428778045","3":"0.006497776","4":"-7.158659e-03","5":"-0.139374092","6":"-0.0247670021","7":"-0.002543754","8":"0.0060904953","9":"0.026133431","10":"-0.05340123","11":"-0.259742","12":"-0.259743"},{"1":"-0.0400709994","2":"-0.1042765900","3":"0.035155855","4":"-7.751319e-03","5":"-0.141178593","6":"-0.0738664418","7":"-0.100032650","8":"-0.0169195402","9":"-0.124975622","10":"-0.05340123","11":"-0.627317","12":"-0.627317"},{"1":"-0.0260801781","2":"-0.0586528331","3":"-0.008058076","4":"2.255566e-03","5":"-0.069908090","6":"-0.0349967405","7":"-0.043254968","8":"-0.0116436779","9":"-0.101131201","10":"-0.05340123","11":"-0.404871","12":"-0.404872"},{"1":"0.0059339367","2":"-0.0092809219","3":"0.067208380","4":"7.482174e-03","5":"-0.057599556","6":"0.0820926502","7":"-0.036125131","8":"0.0048687430","9":"-0.058449328","10":"-0.05340123","11":"-0.047270","12":"-0.047271"},{"1":"-0.0219659582","2":"-0.1108128056","3":"-0.101829343","4":"-3.493334e-03","5":"-0.172395140","6":"-0.0492037237","7":"-0.044846371","8":"-0.0117109334","9":"-0.107831307","10":"-0.05340123","11":"-0.677490","12":"-0.677492"},{"1":"0.0218092874","2":"-0.0172697790","3":"0.111211196","4":"2.217595e-03","5":"-0.122232020","6":"-0.0366986282","7":"-0.082450069","8":"0.0038313984","9":"-0.096375428","10":"-0.05340123","11":"-0.269358","12":"-0.269358"},{"1":"-0.0477577113","2":"-0.0870318189","3":"0.051973253","4":"1.187994e-03","5":"-0.023149284","6":"0.0397656895","7":"-0.014364657","8":"-0.0038569625","9":"0.019389296","10":"-0.05340123","11":"-0.117245","12":"-0.117246"},{"1":"-0.0994141772","2":"-0.1517521143","3":"0.060631007","4":"-1.159356e-02","5":"-0.087962359","6":"0.0309362691","7":"-0.037911475","8":"-0.0220753495","9":"-0.074112967","10":"-0.05340123","11":"-0.446656","12":"-0.446656"},{"1":"-0.0504874438","2":"-0.1186685115","3":"0.054829661","4":"-3.066287e-03","5":"-0.106077038","6":"-0.0234967861","7":"-0.054595385","8":"-0.0162388440","9":"-0.115206756","10":"-0.05340123","11":"-0.486409","12":"-0.486409"},{"1":"-0.0266326852","2":"-0.1540543735","3":"-0.045089684","4":"-2.803134e-03","5":"-0.090581089","6":"0.0068350844","7":"-0.056333601","8":"-0.0128697911","9":"-0.093789272","10":"-0.05340123","11":"-0.528720","12":"-0.528718"},{"1":"0.0212415084","2":"-0.0228668898","3":"-0.019060818","4":"-4.334170e-03","5":"0.052571252","6":"-0.0194735229","7":"-0.036830161","8":"0.0016671313","9":"-0.062422283","10":"-0.05340123","11":"-0.142909","12":"-0.142910"},{"1":"0.0213058162","2":"-0.0071197236","3":"-0.016947677","4":"9.147047e-04","5":"0.059751995","6":"0.0002349966","7":"-0.019947479","8":"0.0070957770","9":"-0.054678004","10":"-0.05340123","11":"-0.062791","12":"-0.062791"},{"1":"0.0031041040","2":"-0.0065869708","3":"-0.010886568","4":"-7.876875e-04","5":"0.027252166","6":"0.0087084556","7":"-0.004104926","8":"0.0004201069","9":"0.013939867","10":"-0.05340123","11":"-0.022343","12":"-0.022343"},{"1":"-0.0097762104","2":"-0.0269632451","3":"0.028513748","4":"-1.918749e-03","5":"0.049582079","6":"-0.0063966797","7":"-0.030002270","8":"-0.0045312881","9":"-0.066237554","10":"-0.05340123","11":"-0.121131","12":"-0.121132"},{"1":"-0.0018170779","2":"-0.0199019182","3":"0.009438530","4":"2.311139e-04","5":"0.044553317","6":"0.0062123630","7":"-0.012198476","8":"-0.0052782106","9":"-0.054157250","10":"-0.05340123","11":"-0.086319","12":"-0.086319"},{"1":"0.0212266259","2":"0.0043896106","3":"-0.039580617","4":"6.916042e-03","5":"-0.014644618","6":"0.0113162575","7":"0.029403478","8":"0.0264685079","9":"0.021725155","10":"-0.05340123","11":"0.013819","12":"0.013819"},{"1":"-0.0165038295","2":"0.0063096350","3":"0.047956191","4":"3.849136e-03","5":"-0.022784498","6":"0.0348637030","7":"-0.003756555","8":"0.0020311731","9":"0.024539787","10":"-0.05340123","11":"0.023104","12":"0.023103"},{"1":"-0.0286504366","2":"-0.0495797805","3":"0.064402476","4":"-7.917322e-04","5":"-0.056139115","6":"0.0252966564","7":"-0.028089095","8":"-0.0078022042","9":"-0.064872168","10":"-0.05340123","11":"-0.199627","12":"-0.199627"},{"1":"-0.0081983032","2":"-0.0230019428","3":"0.025754048","4":"-3.931802e-04","5":"0.033508584","6":"0.0404351912","7":"-0.011450314","8":"-0.0067160185","9":"-0.052096579","10":"-0.05340123","11":"-0.055560","12":"-0.055561"},{"1":"0.0314157568","2":"-0.0624221824","3":"-0.050067376","4":"4.624651e-03","5":"-0.036885649","6":"-0.0216477755","7":"-0.022591643","8":"0.0061887871","9":"-0.070878468","10":"-0.05340123","11":"-0.275665","12":"-0.275665"},{"1":"0.0172771625","2":"-0.0580719933","3":"0.083753824","4":"-1.850747e-03","5":"-0.178187475","6":"-0.0687349737","7":"-0.085369840","8":"-0.0148926424","9":"-0.099707678","10":"-0.05340123","11":"-0.459186","12":"-0.459186"},{"1":"-0.0313342847","2":"-0.0473310575","3":"0.034905057","4":"-3.627586e-03","5":"-0.017035291","6":"-0.0170644931","7":"-0.030074209","8":"-0.0107014794","9":"-0.080972090","10":"-0.05340123","11":"-0.256637","12":"-0.256636"},{"1":"0.0236596707","2":"-0.0400993675","3":"0.097986326","4":"1.990399e-02","5":"-0.045384467","6":"0.0645595044","7":"-0.026978260","8":"0.0009423399","9":"-0.054510001","10":"-0.05340123","11":"-0.013321","12":"-0.013323"},{"1":"0.0128016230","2":"-0.0537426844","3":"0.087067239","4":"3.362779e-03","5":"0.046648584","6":"-0.0154769672","7":"-0.039698098","8":"0.0098296534","9":"-0.080674835","10":"-0.05340123","11":"-0.083284","12":"-0.083283"},{"1":"0.0129365362","2":"-0.0812472478","3":"0.071537115","4":"1.299744e-02","5":"0.044867229","6":"-0.0206396226","7":"-0.039488833","8":"0.0088472506","9":"-0.077800363","10":"-0.05340123","11":"-0.121392","12":"-0.121392"},{"1":"0.0071663558","2":"-0.1085557416","3":"-0.073497087","4":"4.984509e-04","5":"-0.159230113","6":"-0.0540854409","7":"-0.041805744","8":"0.0004841476","9":"-0.106088243","10":"-0.05340123","11":"-0.588515","12":"-0.588515"},{"1":"-0.0372117311","2":"-0.1034484804","3":"0.068016261","4":"5.248742e-04","5":"-0.106287092","6":"-0.0259149335","7":"-0.048252616","8":"-0.0151395258","9":"-0.101245016","10":"-0.05340123","11":"-0.422359","12":"-0.422359"},{"1":"-0.0172497686","2":"-0.0409863219","3":"0.108006947","4":"6.138304e-03","5":"-0.097675905","6":"-0.0317341983","7":"-0.027122222","8":"-0.0064742048","9":"-0.078576587","10":"-0.05340123","11":"-0.239075","12":"-0.239077"},{"1":"-0.0197287519","2":"-0.0811521932","3":"0.056225598","4":"8.394768e-04","5":"-0.047157466","6":"0.0622345656","7":"-0.031084541","8":"-0.0105295675","9":"-0.074783027","10":"-0.05340123","11":"-0.198537","12":"-0.198537"},{"1":"-0.0060876342","2":"-0.0421418548","3":"-0.035524216","4":"-5.819851e-03","5":"-0.009741014","6":"-0.0265345611","7":"-0.063905068","8":"0.0021353005","9":"-0.061221264","10":"-0.05340123","11":"-0.302241","12":"-0.302242"},{"1":"0.0317473859","2":"-0.0055732895","3":"-0.016294612","4":"1.092146e-02","5":"0.015065541","6":"-0.0061486172","7":"-0.021381453","8":"0.0107756825","9":"-0.035651054","10":"-0.05340123","11":"-0.069940","12":"-0.069941"},{"1":"-0.0315953828","2":"-0.1119127870","3":"-0.099623017","4":"-1.007352e-02","5":"-0.091099367","6":"-0.0454494990","7":"-0.072560750","8":"-0.0102768997","9":"-0.102139227","10":"-0.05340123","11":"-0.628132","12":"-0.628133"},{"1":"-0.0110677760","2":"-0.0903485864","3":"-0.088479199","4":"-5.864222e-04","5":"-0.068954572","6":"-0.0366584398","7":"-0.028164582","8":"-0.0040124822","9":"-0.087244242","10":"-0.05340123","11":"-0.468918","12":"-0.468919"},{"1":"-0.0174137559","2":"-0.1459120661","3":"-0.007166845","4":"-1.154324e-02","5":"-0.246219635","6":"-0.1356992722","7":"-0.121332780","8":"-0.0259336401","9":"-0.148530021","10":"-0.05340123","11":"-0.913152","12":"-0.913154"},{"1":"-0.0102077024","2":"-0.0762086511","3":"-0.013421468","4":"7.591142e-03","5":"-0.055695094","6":"-0.0097891614","7":"-0.034747161","8":"-0.0113142971","9":"-0.091827668","10":"-0.05340123","11":"-0.349021","12":"-0.349022"},{"1":"-0.0325730108","2":"-0.1266668439","3":"-0.220653385","4":"-2.124669e-02","5":"-0.343930244","6":"-0.0888820067","7":"0.026348472","8":"-0.0376610272","9":"-0.018745765","10":"-0.05340123","11":"-0.917412","12":"-0.917413"},{"1":"0.0044370750","2":"-0.0171400756","3":"0.028329374","4":"6.713988e-03","5":"0.036542583","6":"0.0273305569","7":"-0.024999082","8":"0.0101614613","9":"-0.061007705","10":"-0.05340123","11":"-0.043033","12":"-0.043035"},{"1":"-0.0081277341","2":"-0.0184246134","3":"0.048385609","4":"-1.298310e-03","5":"-0.037363634","6":"0.0128600849","7":"-0.022274964","8":"-0.0087538557","9":"-0.071909361","10":"-0.05340123","11":"-0.160308","12":"-0.160308"},{"1":"-0.0134758847","2":"-0.0757268518","3":"0.029323528","4":"1.464528e-02","5":"-0.106214292","6":"0.0103424946","7":"-0.054359745","8":"-0.0093295546","9":"-0.096182063","10":"-0.05340123","11":"-0.354378","12":"-0.354379"},{"1":"-0.0093246941","2":"-0.0301374085","3":"0.071784973","4":"-9.694887e-04","5":"0.046053197","6":"-0.0146768615","7":"-0.022565750","8":"-0.0061643077","9":"-0.065151833","10":"-0.05340123","11":"-0.084553","12":"-0.084554"},{"1":"-0.0115706520","2":"-0.0321790949","3":"0.041770801","4":"5.590876e-05","5":"0.040896740","6":"-0.0206735190","7":"-0.014096109","8":"-0.0081254998","9":"-0.069544412","10":"-0.05340123","11":"-0.126867","12":"-0.126868"},{"1":"0.0484453738","2":"0.0369067192","3":"0.046960957","4":"1.376147e-02","5":"0.005299550","6":"0.0074281846","7":"0.064777866","8":"0.0370731950","9":"0.046992213","10":"-0.05340123","11":"0.254244","12":"0.254244"},{"1":"0.0044120275","2":"-0.0349322967","3":"0.014731070","4":"-7.770964e-04","5":"0.028975122","6":"0.0048395381","7":"-0.020872550","8":"-0.0039744326","9":"-0.053599719","10":"-0.05340123","11":"-0.114600","12":"-0.114600"},{"1":"-0.0089165755","2":"-0.0439447649","3":"-0.037974283","4":"-4.149526e-03","5":"-0.061276194","6":"0.0071945740","7":"-0.035690702","8":"-0.0094972756","9":"-0.079479128","10":"-0.05340123","11":"-0.327135","12":"-0.327135"},{"1":"0.0075653787","2":"-0.0314162634","3":"0.017560288","4":"1.818044e-03","5":"0.046421852","6":"-0.0155337835","7":"-0.030640971","8":"0.0075915912","9":"-0.065972365","10":"-0.05340123","11":"-0.116007","12":"-0.116008"},{"1":"0.0022925963","2":"-0.0279635116","3":"0.084113196","4":"-1.164101e-03","5":"0.042048518","6":"-0.0063665109","7":"-0.018710529","8":"-0.0022723125","9":"-0.055356245","10":"-0.05340123","11":"-0.036780","12":"-0.036780"},{"1":"0.0404495522","2":"0.0098273885","3":"0.041305136","4":"6.486313e-03","5":"0.042918127","6":"0.0101047773","7":"0.047360390","8":"0.0319042020","9":"0.043829206","10":"-0.05340123","11":"0.220784","12":"0.220783"},{"1":"0.0106106866","2":"-0.0154153928","3":"0.006241180","4":"-2.528868e-03","5":"0.047193088","6":"0.0070548099","7":"-0.036410686","8":"0.0059262980","9":"-0.051892512","10":"-0.05340123","11":"-0.082623","12":"-0.082622"},{"1":"0.0175790284","2":"-0.0047751893","3":"-0.001968610","4":"4.985942e-03","5":"0.047320805","6":"0.0147512313","7":"-0.010655334","8":"0.0083679054","9":"-0.036142729","10":"-0.05340123","11":"-0.013938","12":"-0.013938"},{"1":"0.0314964950","2":"0.0148218740","3":"-0.012140704","4":"6.943374e-04","5":"0.044385601","6":"-0.0129275583","7":"-0.008035120","8":"-0.0006616174","9":"-0.031153042","10":"-0.05340123","11":"-0.026921","12":"-0.026921"},{"1":"-0.0130059039","2":"-0.1059201211","3":"-0.112128526","4":"-6.078938e-04","5":"-0.127078086","6":"-0.0201782659","7":"-0.020744134","8":"-0.0120625589","9":"-0.108820111","10":"-0.05340123","11":"-0.573947","12":"-0.573948"},{"1":"0.0495855957","2":"0.0003480429","3":"-0.027900917","4":"1.286378e-02","5":"0.071276844","6":"0.0255651250","7":"0.027297687","8":"0.0266943276","9":"0.023191009","10":"-0.05340123","11":"0.155520","12":"0.155519"},{"1":"0.0076706181","2":"-0.0275868010","3":"0.043720819","4":"6.420943e-03","5":"0.048881829","6":"-0.0038462286","7":"-0.029056961","8":"0.0094320914","9":"-0.068454504","10":"-0.05340123","11":"-0.066219","12":"-0.066220"},{"1":"-0.0099053569","2":"-0.0183076728","3":"0.041032556","4":"-1.972893e-03","5":"0.035615731","6":"0.0338612981","7":"-0.014658893","8":"-0.0032487928","9":"-0.042369314","10":"-0.05340123","11":"-0.033355","12":"-0.033355"},{"1":"0.0067076059","2":"-0.1462740451","3":"-0.059827287","4":"-2.944319e-03","5":"0.045958009","6":"-0.0414074324","7":"-0.040385842","8":"-0.0100175133","9":"-0.090825215","10":"-0.05340123","11":"-0.392417","12":"-0.392418"},{"1":"-0.0141564095","2":"-0.0293674879","3":"0.033131331","4":"-1.815943e-03","5":"0.022674453","6":"0.0161384195","7":"-0.011926522","8":"-0.0035722812","9":"-0.041907355","10":"-0.05340123","11":"-0.084203","12":"-0.084203"},{"1":"0.0205176529","2":"-0.0115536982","3":"0.105967715","4":"3.547618e-02","5":"0.040072322","6":"0.1850253940","7":"0.011066453","8":"0.0028745993","9":"-0.002426036","10":"-0.05340123","11":"0.333619","12":"0.333618"},{"1":"0.0036930582","2":"-0.0258656573","3":"0.023205148","4":"4.433434e-03","5":"-0.006344449","6":"0.0151686352","7":"0.024749240","8":"0.0269055422","9":"0.019194437","10":"-0.05340123","11":"0.031738","12":"0.031737"},{"1":"-0.0155798476","2":"-0.0252143331","3":"-0.033669449","4":"-3.474796e-03","5":"0.041275024","6":"-0.0036431339","7":"-0.041342575","8":"0.0018598090","9":"-0.054786481","10":"-0.05340123","11":"-0.187977","12":"-0.187977"},{"1":"-0.0015447162","2":"-0.0189358573","3":"-0.030981878","4":"1.607809e-03","5":"0.041944358","6":"-0.0080792885","7":"-0.008020719","8":"0.0022591890","9":"-0.046275359","10":"-0.05340123","11":"-0.121428","12":"-0.121428"},{"1":"-0.0265343990","2":"-0.0287277009","3":"-0.025234312","4":"-2.491400e-03","5":"-0.095003359","6":"-0.0540817901","7":"-0.057329603","8":"-0.0094872974","9":"-0.098409280","10":"-0.05340123","11":"-0.450700","12":"-0.450701"},{"1":"0.0014947928","2":"-0.0319887064","3":"-0.058111243","4":"5.110541e-03","5":"-0.049619775","6":"-0.0186078958","7":"-0.009350573","8":"-0.0046267658","9":"-0.063368797","10":"-0.05340123","11":"-0.282470","12":"-0.282471"},{"1":"0.0088246940","2":"0.0140852071","3":"0.064896867","4":"4.948444e-03","5":"-0.012649938","6":"0.0420057252","7":"0.049408112","8":"0.0357798226","9":"0.043677486","10":"-0.05340123","11":"0.197575","12":"0.197574"},{"1":"0.0079200296","2":"-0.0464857072","3":"-0.040212482","4":"-4.714936e-03","5":"0.040063925","6":"-0.0380615741","7":"-0.071290508","8":"-0.0005418439","9":"-0.080396526","10":"-0.05340123","11":"-0.287121","12":"-0.287120"},{"1":"0.0082007572","2":"-0.0198948067","3":"-0.035580266","4":"2.200765e-03","5":"0.037454069","6":"-0.0129267992","7":"-0.009026537","8":"0.0052288389","9":"-0.041611664","10":"-0.05340123","11":"-0.119357","12":"-0.119357"},{"1":"-0.0055073956","2":"-0.0909900367","3":"0.006921533","4":"1.059233e-03","5":"0.035460629","6":"-0.0276223700","7":"-0.018784154","8":"-0.0092295883","9":"-0.083171964","10":"-0.05340123","11":"-0.245265","12":"-0.245265"},{"1":"-0.0079946015","2":"0.0009911199","3":"-0.008530615","4":"4.162421e-03","5":"-0.067450516","6":"-0.0179316849","7":"0.067082494","8":"0.0184664726","9":"0.032692418","10":"-0.05340123","11":"-0.031914","12":"-0.031914"},{"1":"-0.0219449401","2":"-0.1178886816","3":"-0.030619722","4":"-3.875663e-03","5":"0.037687626","6":"0.0258764066","7":"-0.011364086","8":"-0.0105815306","9":"-0.041162480","10":"-0.05340123","11":"-0.227274","12":"-0.227275"},{"1":"-0.2277806103","2":"-0.1497098505","3":"-0.190450445","4":"-6.987118e-03","5":"-0.192337692","6":"-0.1034051850","7":"-0.004245761","8":"-0.0071765073","9":"-0.016187536","10":"-0.05340123","11":"-0.951682","12":"-0.951680"},{"1":"-0.0170634836","2":"-0.0123470202","3":"-0.019903371","4":"-3.078968e-03","5":"0.040864293","6":"0.0091981320","7":"-0.036414240","8":"0.0030700010","9":"-0.042510491","10":"-0.05340123","11":"-0.131586","12":"-0.131586"},{"1":"-0.0058043529","2":"0.0021230073","3":"-0.019654287","4":"-8.784676e-04","5":"0.039576467","6":"0.0096740499","7":"-0.009468175","8":"0.0031942546","9":"-0.028593360","10":"-0.05340123","11":"-0.063232","12":"-0.063233"},{"1":"-0.0054312581","2":"0.0083735837","3":"-0.024898857","4":"-1.197856e-04","5":"0.042077888","6":"-0.0073296693","7":"-0.003965730","8":"-0.0019065931","9":"-0.034028396","10":"-0.05340123","11":"-0.080630","12":"-0.080630"},{"1":"0.0190900601","2":"-0.0127901454","3":"-0.055422101","4":"1.242133e-02","5":"0.024725931","6":"0.0023115985","7":"0.020147132","8":"0.0158993602","9":"0.016411852","10":"-0.05340123","11":"-0.010606","12":"-0.010606"},{"1":"-0.0055379719","2":"-0.0694710538","3":"-0.060098000","4":"-7.033189e-03","5":"0.043555249","6":"-0.0234822687","7":"-0.058782682","8":"-0.0037001453","9":"-0.071903922","10":"-0.05340123","11":"-0.309855","12":"-0.309855"},{"1":"0.0117649529","2":"-0.0577176847","3":"-0.059720829","4":"2.684417e-03","5":"0.048019424","6":"-0.0187657904","7":"-0.023205349","8":"-0.0006424420","9":"-0.065036036","10":"-0.05340123","11":"-0.216021","12":"-0.216021"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="shap-plots" class="section level1">
<h1>SHAP plots</h1>
<div id="stack-plot" class="section level2">
<h2>Stack plot</h2>
<pre><code>## Data has N: 8441 | zoom in length is 150 at location 5064.6</code></pre>
<p><img src="2019-07-18-visualization-of-shap-for-xgboost_files/figure-html/unnamed-chunk-3-1.png" width="768" /><img src="2019-07-18-visualization-of-shap-for-xgboost_files/figure-html/unnamed-chunk-3-2.png" width="768" /></p>
</div>
<div id="summary-plot" class="section level2">
<h2>Summary plot</h2>
<p><img src="2019-07-18-visualization-of-shap-for-xgboost_files/figure-html/unnamed-chunk-4-1.png" width="960" /></p>
</div>
<div id="dependence-plot" class="section level2">
<h2>Dependence plot</h2>
<p><img src="2019-07-18-visualization-of-shap-for-xgboost_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p><img src="2019-07-18-visualization-of-shap-for-xgboost_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
</div>
